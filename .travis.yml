language: java
jdk:
- oraclejdk8
sudo: false
install: true
script:
- "./gradlew build"




after_success:
  - pwd
  - mkdir codedeploy
  - zip -r csye6225-spring-boot-starter-webapp-master.zip build/libs/ROOT.war appspec.yml ./restartTomcat.sh
  - ls -al
  - mv csye6225-spring-boot-starter-webapp-master.zip codedeploy/
  - ls -al
  - pwd
  - cd codedeploy
  - ls -al
  - pwd

before_deploy:
  - cd ..
  - pwd
  
  

deploy:
  - provider: s3
    access_key_id: AKIAIDQOT7SGAR76DL2Q
    secret_access_key:
      secure: "zphpiBHBPkRrTNnpPPiQbQ9IBVj5oA0t6y2jgU+Zq8J0+jUAifoODwNc0gv+Ho4SP7PlJs04fTbzb0lcgfW+rY5jXY0fgoQhF+/mqDPoYd7/Wb8l9p/GeOndE7EmGmuI41ujbVo/Ix9O7DPxzTJtE8I6pd4kRSYopYwHvQ1uSoN7cfkSlDFVmn0UKDho4MNF2Ix630NJqmethHLNb3LsPSIlgrbnUXP8g4g9DFVLOdPcU3uqTW2pk+/2JAeR6LIamUV5+8TFnZpWV12hrdHN5y0BB8cR/f6uDdxYSgQO43bzKsbiTKQYRm1cZ/69HQEeOIATUMvo5ZChAtMSmEXGo5L67oiCxvbsSECeYSYgFmezypc5nN+fGwwKjo1M8Me+3sSfAWbNvOqDw6zWuJSFgq3w0CQNzkRfw3Jp2qiC7XmLkVlHdXSgwQftufyxIsFGquIXJXpBaUGJxmUXOaujOD8YXSG27LrhtlneqIJ9tEbp9dBsCBcxqXcWAid6K4PejHp+uDFk8CkPyQAih53vDtLX0tuMbG4eI3pLoAoKcMmQTmjRpBXgGhG1/tregY/HHD2hfq+KVSHkGdj2nToSE2yGCmBYydppHVT6OUHwJMOYGOCQ+IL6/+9xYLlPas9EAfJPX92yMEWHJdI4k2g25CprK7GcmVxZG6HxUb0Sq24="
    local_dir: codedeploy
    bucket: csye6225-fall2017-sharmaj.me.csye6225.com
    region: us-east-1
    skip_cleanup: true


  - provider: codedeploy
    access_key_id: AKIAIDQOT7SGAR76DL2Q
    bucket: csye6225-fall2017-sharmaj.me.csye6225.com
    key: csye6225-spring-boot-starter-webapp-master.zip
    bundle_type: zip
    application: SimpleJavaProject
    deployment_group: SimpleJavaProject
    region: us-east-1
    secret_access_key:
      secure: "zphpiBHBPkRrTNnpPPiQbQ9IBVj5oA0t6y2jgU+Zq8J0+jUAifoODwNc0gv+Ho4SP7PlJs04fTbzb0lcgfW+rY5jXY0fgoQhF+/mqDPoYd7/Wb8l9p/GeOndE7EmGmuI41ujbVo/Ix9O7DPxzTJtE8I6pd4kRSYopYwHvQ1uSoN7cfkSlDFVmn0UKDho4MNF2Ix630NJqmethHLNb3LsPSIlgrbnUXP8g4g9DFVLOdPcU3uqTW2pk+/2JAeR6LIamUV5+8TFnZpWV12hrdHN5y0BB8cR/f6uDdxYSgQO43bzKsbiTKQYRm1cZ/69HQEeOIATUMvo5ZChAtMSmEXGo5L67oiCxvbsSECeYSYgFmezypc5nN+fGwwKjo1M8Me+3sSfAWbNvOqDw6zWuJSFgq3w0CQNzkRfw3Jp2qiC7XmLkVlHdXSgwQftufyxIsFGquIXJXpBaUGJxmUXOaujOD8YXSG27LrhtlneqIJ9tEbp9dBsCBcxqXcWAid6K4PejHp+uDFk8CkPyQAih53vDtLX0tuMbG4eI3pLoAoKcMmQTmjRpBXgGhG1/tregY/HHD2hfq+KVSHkGdj2nToSE2yGCmBYydppHVT6OUHwJMOYGOCQ+IL6/+9xYLlPas9EAfJPX92yMEWHJdI4k2g25CprK7GcmVxZG6HxUb0Sq24="
    wait-until-deployed: true



notifications:
  email:
    recipients:
    - patil.sur@husky.neu.edu
    - murali.a@husky.neu.edu
    - sharma.j@husky.neu.edu
    on_success: always
