language: java
jdk:
- oraclejdk8
sudo: false
install: true
script:
- "./gradlew build"




after_success:
  - pwd
  - mkdir codedeploy
  - zip -r csye6225-spring-boot-starter-webapp-master.zip build/libs/ROOT.war appspec.yml ./restartTomcat.sh
  - ls -al
  - mv csye6225-spring-boot-starter-webapp-master.zip codedeploy/
  - ls -al
  - pwd
  - cd codedeploy
  - ls -al
  - pwd

before_deploy:
  - cd ..
  - pwd
  
  

deploy:
  - provider: s3
    access_key_id: AKIAIZLMQV2WX45QNHMQ
    secret_access_key: 
      secure: "vvZmIM5tyR44kxy4sYLmXlSHALiypfhqoHA90oD+erYwb+garCPtgvmPz4JXyaIbSOLDYUXEov/aYoCGV9nDawV5RGlt+IgLJJhigZqwS3YxnpNb7efJxO9jDqVRGQs2MIS+wxFi8OwcoMhu4BIMHZYCgvyqhETSUuOqX91PEVUgN7Jee2JSz7dVD0ivgpK8q+L64mko+nbh3A2cdcnDokz2pZuYB4r+PTNYlgZzbv91PHrXacNRw9RuR67nImYuzJeYwKQ6j3Po4vihS1v5sajyFANjtSC2BCFeHM8u6U/Bbu87tY/POs+JSKI1vSt3gWsEi1sX02IFhwt/T//VLw9tfE8mPI/m0av+xPGs1Q56icJ/g738i93I/GqfQAeJ0BEYh7gNbQbLBouPRa9cM2mzqAEyhHFiJDeuhWIM36WDmH1QsS+FCJcqppu7wiep7crRBFLRoWcmv60MLH3bDQVRlAbUV3iRbtVWtkvmGEsPxOvJFCpa4BBYnhCz46oOMcuw8ezIFrm+Rrc8HqkZX7xkY5kc7XTxbKGmZiimUZqx4bRwSoaxhWnAWUuRKFPhiHYTBNGtiElQcrAzdZihukOEvLTkmTTtN5vQ3LPGrXR5OoXLnomul4bIzPtUCdD1qqvirotxjAz7C1/DW+pSQr4NWLrcXukjEEapa1K89HM="
    local_dir: codedeploy
    bucket: csye6225-fall2017-sharmaj.me.csye6225.com
    region: us-east-1
    skip_cleanup: true
    

  - provider: codedeploy
    access_key_id: AKIAIZLMQV2WX45QNHMQ
    bucket: csye6225-fall2017-sharmaj.me.csye6225.com
    key: csye6225-spring-boot-starter-webapp-master.zip
    bundle_type: zip
    application: SimpleJavaProject
    deployment_group: SimpleJavaProject
    region: us-east-1
    secret_access_key:
      secure: "vvZmIM5tyR44kxy4sYLmXlSHALiypfhqoHA90oD+erYwb+garCPtgvmPz4JXyaIbSOLDYUXEov/aYoCGV9nDawV5RGlt+IgLJJhigZqwS3YxnpNb7efJxO9jDqVRGQs2MIS+wxFi8OwcoMhu4BIMHZYCgvyqhETSUuOqX91PEVUgN7Jee2JSz7dVD0ivgpK8q+L64mko+nbh3A2cdcnDokz2pZuYB4r+PTNYlgZzbv91PHrXacNRw9RuR67nImYuzJeYwKQ6j3Po4vihS1v5sajyFANjtSC2BCFeHM8u6U/Bbu87tY/POs+JSKI1vSt3gWsEi1sX02IFhwt/T//VLw9tfE8mPI/m0av+xPGs1Q56icJ/g738i93I/GqfQAeJ0BEYh7gNbQbLBouPRa9cM2mzqAEyhHFiJDeuhWIM36WDmH1QsS+FCJcqppu7wiep7crRBFLRoWcmv60MLH3bDQVRlAbUV3iRbtVWtkvmGEsPxOvJFCpa4BBYnhCz46oOMcuw8ezIFrm+Rrc8HqkZX7xkY5kc7XTxbKGmZiimUZqx4bRwSoaxhWnAWUuRKFPhiHYTBNGtiElQcrAzdZihukOEvLTkmTTtN5vQ3LPGrXR5OoXLnomul4bIzPtUCdD1qqvirotxjAz7C1/DW+pSQr4NWLrcXukjEEapa1K89HM="
    wait-until-deployed: true
    


notifications:
  email:
    recipients:
    - patil.sur@husky.neu.edu
    - murali.a@husky.neu.edu
    - sharma.j@husky.neu.edu
    on_success: always

